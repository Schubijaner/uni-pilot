### Uni Pilot API - User Profile Tests
### Run these after onboarding tests (requires valid token and topic field selection)

@baseUrl = http://localhost:8000
@apiVersion = v1

### Use token from login (you'll need to copy it from 01-auth.http response)
@token = YOUR_TOKEN_HERE

### 1. Get User Profile (should fail if profile doesn't exist)
GET {{baseUrl}}/api/{{apiVersion}}/users/me/profile
Authorization: Bearer {{token}}
Accept: application/json

### 2. Create User Profile (requires authentication)
PUT {{baseUrl}}/api/{{apiVersion}}/users/me/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "university_id": 1,
  "study_program_id": 1,
  "current_semester": 3,
  "skills": "Python, JavaScript, SQL"
}

### 3. Update User Profile
PUT {{baseUrl}}/api/{{apiVersion}}/users/me/profile
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "university_id": 1,
  "study_program_id": 1,
  "current_semester": 4,
  "skills": "Python, JavaScript, SQL, React, FastAPI"
}

### 4. Get User Profile (should now return profile)
GET {{baseUrl}}/api/{{apiVersion}}/users/me/profile
Authorization: Bearer {{token}}
Accept: application/json

### 5. Get User Modules (empty initially)
GET {{baseUrl}}/api/{{apiVersion}}/users/me/modules
Authorization: Bearer {{token}}
Accept: application/json

### 6. Update Module Progress (replace {module_id} with actual module ID)
PUT {{baseUrl}}/api/{{apiVersion}}/users/me/modules/1/progress
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "completed": true,
  "grade": "1.3",
  "completed_at": "2024-01-15T10:00:00Z"
}

### 7. Update Module Progress - Incomplete
PUT {{baseUrl}}/api/{{apiVersion}}/users/me/modules/2/progress
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "completed": false,
  "grade": null,
  "completed_at": null
}

### 8. Get User Modules (should now show progress)
GET {{baseUrl}}/api/{{apiVersion}}/users/me/modules
Authorization: Bearer {{token}}
Accept: application/json

